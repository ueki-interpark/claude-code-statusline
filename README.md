# claude-code-statusline

[Claude Code](https://docs.anthropic.com/en/docs/claude-code) CLI ã®ã‚«ã‚¹ã‚¿ãƒ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ©ã‚¤ãƒ³ã§ã™ã€‚ã‚»ãƒƒã‚·ãƒ§ãƒ³æƒ…å ±ã‚’ã²ã¨ç›®ã§ç¢ºèªã§ãã¾ã™ã€‚

## ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼

```
ğŸ”€ ~/source/my-project on ğŸŒ¿ feature/auth
ğŸ¤– Claude Opus 4.6 | ğŸ’° $0.1234 | ğŸ§  [########------------] 40.0% | ğŸ”„ 60.0%
```

## æ©Ÿèƒ½

- **ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª** - ãƒ›ãƒ¼ãƒ ã‚’ `~` ã«ç½®æ›ã—ã€æ·±ã„éšå±¤ã¯ `~/.../<è¦ª>/<æœ«å°¾>` ã«çŸ­ç¸®
- **Gitãƒ–ãƒ©ãƒ³ãƒ** - Gitãƒªãƒã‚¸ãƒˆãƒªå†…ã§ã¯ãƒ–ãƒ©ãƒ³ãƒåã‚’è¡¨ç¤º
- **ãƒ¢ãƒ‡ãƒ«å** - ä½¿ç”¨ä¸­ã®Claudeãƒ¢ãƒ‡ãƒ«ã‚’è¡¨ç¤º
- **ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚³ã‚¹ãƒˆ** - ç´¯è¨ˆã‚³ã‚¹ãƒˆï¼ˆUSDï¼‰ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¡¨ç¤º
- **ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆä½¿ç”¨ç‡** - Auto-Compacté–¾å€¤ã‚’åŸºæº–ã«æ­£è¦åŒ–ã—ãŸä½¿ç”¨ç‡ã‚’è‰²ä»˜ããƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ã§è¡¨ç¤º
- **ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆæ®‹é‡** - æ®‹ã‚Šã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®å‰²åˆã‚’è¡¨ç¤º
- **è‰²åˆ†ã‘**:
  - ğŸŸ¢ ç·‘: 50%æœªæº€
  - ğŸŸ¡ é»„: 50-79%
  - ğŸ”´ èµ¤: 80%ä»¥ä¸Š

### Auto-Compacté–¾å€¤ã®æ­£è¦åŒ–

Claude Codeã® `used_percentage` ã¨ `remaining_percentage` ã®åˆè¨ˆã¯ Auto-Compact ã®é–¾å€¤ï¼ˆé€šå¸¸95%ï¼‰ã«ãªã‚Šã¾ã™ã€‚æœ¬ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ©ã‚¤ãƒ³ã§ã¯ã€ã“ã®é–¾å€¤ã‚’100%ã¨ã—ã¦æ­£è¦åŒ–ã—ã¦è¡¨ç¤ºã—ã¾ã™ã€‚

ä¾‹: `used=47.5%`, `remaining=47.5%`ï¼ˆé–¾å€¤95%ï¼‰â†’ ä½¿ç”¨ç‡ `50.0%` / æ®‹é‡ `50.0%` ã¨è¡¨ç¤º

## å‰ææ¡ä»¶

- **Bash**ï¼ˆmacOS/Linuxæ¨™æº–ã€Windowsã§ã¯ [Git for Windows](https://gitforwindows.org/) ã®Git Bashã§åˆ©ç”¨å¯èƒ½ï¼‰
- **awk** - ãƒ‘ãƒ¼ã‚»ãƒ³ãƒ†ãƒ¼ã‚¸è¨ˆç®—ã«ä½¿ç”¨ï¼ˆé€šå¸¸ãƒ—ãƒªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ï¼‰
- **git** - ãƒ–ãƒ©ãƒ³ãƒè¡¨ç¤ºã«ä½¿ç”¨ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
- **jq** - ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆ (`install.sh`) ã§ä½¿ç”¨

> **Note**: `statusline.sh` æœ¬ä½“ã¯ jq ã«ä¾å­˜ã›ãšã€sed/grep ã§ JSON ã‚’ãƒ‘ãƒ¼ã‚¹ã—ã¾ã™ã€‚

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

### ã‚¯ã‚¤ãƒƒã‚¯ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
git clone https://github.com/ueki-interpark/claude-code-statusline.git
cd claude-code-statusline
./install.sh
```

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯ä»¥ä¸‹ã‚’è¡Œã„ã¾ã™:
1. `statusline.sh` ã‚’ `~/.claude/` ã«ã‚³ãƒ”ãƒ¼
2. `~/.claude/settings.json` ã« statusLine è¨­å®šã‚’è¿½åŠ 
3. æ—¢å­˜ã® settings.json ã‚’ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—

### æ‰‹å‹•ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

1. `statusline.sh` ã‚’ `~/.claude/` ã«ã‚³ãƒ”ãƒ¼:

```bash
cp statusline.sh ~/.claude/statusline.sh
chmod +x ~/.claude/statusline.sh
```

2. `~/.claude/settings.json` ã«ä»¥ä¸‹ã‚’è¿½åŠ :

```json
{
  "statusLine": {
    "type": "command",
    "command": "~/.claude/statusline.sh"
  }
}
```

3. Claude Code ã‚’å†èµ·å‹•ã—ã¦ãã ã•ã„ã€‚

## ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

`~/.claude/statusline.sh` ã‚’ç·¨é›†ã—ã¦ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã§ãã¾ã™ã€‚ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯æ¨™æº–å…¥åŠ›ã‹ã‚‰Claude CodeãŒæä¾›ã™ã‚‹JSONã‚’å—ã‘å–ã‚Šã¾ã™ã€‚

### ä½¿ç”¨ã—ã¦ã„ã‚‹ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ | å‹ | èª¬æ˜ |
|-------|------|-------------|
| `model.display_name` | string | ä½¿ç”¨ä¸­ã®ãƒ¢ãƒ‡ãƒ«åï¼ˆä¾‹: "Claude Opus 4.6"ï¼‰ |
| `cost.total_cost_usd` | number | ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®åˆè¨ˆã‚³ã‚¹ãƒˆï¼ˆUSDï¼‰ |
| `context_window.used_percentage` | number | ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã®ä½¿ç”¨ç‡ |
| `context_window.remaining_percentage` | number | ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã®æ®‹é‡ç‡ |
| `cwd` | string | ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª |

### ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºä¾‹

**ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ã®ã‚¹ã‚¿ã‚¤ãƒ«å¤‰æ›´:**

```bash
# ãƒ–ãƒ­ãƒƒã‚¯æ–‡å­—ã‚’ä½¿ç”¨
BAR=$(printf "%${FILLED}s" | tr ' ' 'â–ˆ')$(printf "%${EMPTY}s" | tr ' ' 'â–‘')
```

**è­¦å‘Šã—ãã„å€¤ã®å¤‰æ›´:**

```bash
# ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆè­¦å‘Šã‚’60%ã«å¤‰æ›´ï¼ˆæ­£è¦åŒ–å¾Œã®å€¤ã§åˆ¤å®šï¼‰
if [ "$ADJUSTED_USED_INT" -ge 60 ]; then
  CTX_COLOR="$RED"
fi
```

**ã‚¢ã‚¤ã‚³ãƒ³ã®å‰Šé™¤ï¼ˆçµµæ–‡å­—éå¯¾å¿œã‚¿ãƒ¼ãƒŸãƒŠãƒ«å‘ã‘ï¼‰:**

```bash
LINE1="${CYAN}${SHORT_DIR}${RESET} ${DIM}on${RESET} ${MAGENTA}${BRANCH}${RESET}"
```

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

[MIT](LICENSE)
